(this["webpackJsonpevent-app"]=this["webpackJsonpevent-app"]||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(15),c=n.n(s),i=(n(43),n(7)),o=n(8),d=n(11),l=n(10),u=(n(22),n(19)),j=n(9),h=n(16),b=n(14),p=n(12),O=(n(23),n(18)),m=n(1),v=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={disabled:!1},a}return Object(o.a)(n,[{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.setState({disabled:!0}),this.props.client.login(e.target.username.value,e.target.password.value).then((function(e){t.setState({disabled:!1}),t.props.loggedIn(e.data.token)})).catch((function(){alert("an error occured, please try again"),t.setState({disabled:!1})}))}},{key:"render",value:function(){var e=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.a,{bg:"primary",variant:"dark",expand:"md",children:Object(m.jsx)(h.a.Brand,{children:"Event App "})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(u.a,{className:"home",children:[Object(m.jsxs)(j.a,{children:[Object(m.jsx)("h2",{className:"Color",children:"Event App "}),Object(m.jsx)("br",{}),Object(m.jsx)("h4",{className:"Color",children:"What?"}),Object(m.jsx)("p",{children:" Event App is the world\u2019s leading event technology platform trusted by over 50,000 event professionals in more than 50 countries."}),Object(m.jsx)("p",{children:"Our community of customers includes top shows from across the world; amazing performing arts venues; global convention centers; some of the world\u2019s most visited museums, professional sports arenas, and stadia; plus, other unique events and venues of all shapes and sizes."}),Object(m.jsx)("p",{children:"Together, we can create extraordinary events."})]}),Object(m.jsxs)(j.a,{children:[Object(m.jsx)("h3",{className:"Color",children:"Login"})," ",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsxs)("form",{onSubmit:function(t){return e.submitHandler(t)},children:[Object(m.jsx)("p",{children:"Username"}),Object(m.jsx)(b.a.Control,{type:"text",name:"username",placeholder:"Enter you name",disabled:this.state.disabled}),Object(m.jsx)("br",{}),Object(m.jsx)("p",{children:"Password"}),Object(m.jsx)(b.a.Control,{type:"password",name:"password",placeholder:"Password",disabled:this.state.disabled}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(p.a,{variant:"primary",type:"submit",disabled:this.state.disabled,children:" Submit "})]})]})]})})]})}}]),n}(r.a.Component),x=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={disabled:!1},a}return Object(o.a)(n,[{key:"submitHandler",value:function(e){var t,n=this;e.preventDefault(),this.setState({disabled:!0}),t=this.props.currentAd?this.props.client.updateAd(this.props.currentAd._id,e.target.adName.value,e.target.location.value,e.target.date.value,e.target.price.value):this.props.client.addAd(e.target.adName.value,e.target.location.value,e.target.price.value,e.target.date.value),console.log(this.props.client.addAd),t.then((function(){n.setState({disabled:!1}),document.getElementById("addForm").reset(),n.props.refreshList()})).catch((function(){console.log("catch"),alert("an error occured, please try again"),n.setState({disabled:!1})}))}},{key:"render",value:function(){var e,t,n,a,r=this;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(O.a,{children:[Object(m.jsxs)("h2",{className:"add",children:["  ",this.props.currentAd?"Update":"Add Event "]})," ",Object(m.jsx)("br",{}),Object(m.jsxs)("form",{onSubmit:function(e){return r.submitHandler(e)},id:"addForm",children:["Name: ",Object(m.jsx)("br",{}),Object(m.jsx)(b.a.Control,{type:"text",defaultValue:null===(e=this.props.currentAd)||void 0===e?void 0:e.name,name:"adName",disabled:this.state.disabled}),Object(m.jsx)("br",{}),"Location: ",Object(m.jsx)("br",{}),Object(m.jsx)(b.a.Control,{type:"text",defaultValue:null===(t=this.props.currentAd)||void 0===t?void 0:t.location,name:"location",disabled:this.state.disabled}),Object(m.jsx)("br",{}),"Price:",Object(m.jsx)("br",{}),Object(m.jsx)(b.a.Control,{type:"text",defaultValue:null===(n=this.props.currentAd)||void 0===n?void 0:n.price,name:"price",disabled:this.state.disabled}),Object(m.jsx)("br",{}),"Date: ",Object(m.jsx)("br",{}),Object(m.jsx)(b.a.Control,{type:"text",defaultValue:null===(a=this.props.currentAd)||void 0===a?void 0:a.date,name:"date",disabled:this.state.disabled}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(p.a,{type:"submit",disabled:this.state.disabled,children:" Submit "})]})]})})}}]),n}(r.a.Component),f=n(37),g=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={ads:[],currentAd:void 0},a}return Object(o.a)(n,[{key:"refreshList",value:function(){var e=this;this.props.client.getAds().then((function(t){return e.setState({ads:t.data})}))}},{key:"removeAdvert",value:function(e){this.props.client.removeAd(e).then(this.refreshList())}},{key:"updateAdvert",value:function(e){this.setState({currentAd:e})}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"buildrows",value:function(){var e=this;return this.state.ads.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.location}),Object(m.jsxs)("td",{children:["\xa3",t.price]}),Object(m.jsx)("td",{children:t.date}),Object(m.jsxs)("td",{children:[Object(m.jsx)(p.a,{onClick:function(){return e.removeAdvert(t._id)},children:" remove"})," ",Object(m.jsx)(p.a,{onClick:function(){return e.updateAdvert(t)},children:" update"})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.a,{bg:"primary",variant:"dark",expand:"md",children:Object(m.jsx)(h.a.Brand,{children:"Event App "})}),Object(m.jsxs)(u.a,{className:"home",children:[Object(m.jsx)(j.a,{sm:1}),Object(m.jsx)(j.a,{sm:3,children:Object(m.jsx)(x,{client:this.props.client,refreshList:function(){e.refreshList(),e.setState({currentAd:void 0})},currentAd:this.state.currentAd})}),Object(m.jsxs)(j.a,{sm:7,children:[Object(m.jsxs)(f.a,{striped:!0,bordered:!0,hover:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"Color",children:"  Name  "}),Object(m.jsx)("th",{className:"Color",children:" Location "}),Object(m.jsx)("th",{className:"Color",children:"  Price  "}),Object(m.jsx)("th",{className:"Color",children:"  Date  "}),Object(m.jsx)("th",{className:"Color",children:" Action"})]})}),Object(m.jsx)("tbody",{children:this.buildrows()})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]})]}),Object(m.jsx)(p.a,{className:"Button",onClick:function(){return e.props.client.logoutHandler()},children:"logout"})]})}}]),n}(r.a.Component),y=n(26),k=n.n(y),A=n(38),C=n(27),w=n.n(C),S="https://radiant-sea-00933.herokuapp.com/",N=function(){function e(t,n){Object(i.a)(this,e),this.tokenProvider=t,this.logoutHandler=n}return Object(o.a)(e,[{key:"login",value:function(){var e=Object(A.a)(k.a.mark((function e(t,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"post",url:"".concat(S,"auth"),data:{username:t,password:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"autheticatedCall",value:function(e,t,n){var a=this;return w()({method:e,url:t,headers:{authorization:this.tokenProvider()},data:n}).catch((function(e){if(403===e.response.status)return a.logoutHandler(),Promise.reject();throw e}))}},{key:"getAds",value:function(){return this.autheticatedCall("get",S)}},{key:"addAd",value:function(e,t,n,a){return this.autheticatedCall("post",S,{name:e,location:t,price:n,date:a})}},{key:"removeAd",value:function(e){return this.autheticatedCall("delete","".concat(S).concat(e))}},{key:"updateAd",value:function(e,t,n,a,r){return this.autheticatedCall("put","".concat(S).concat(e),{name:t,location:n,price:r,date:a})}}]),e}(),L=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={token:window.localStorage.getItem("token")},a.client=new N((function(){return a.state.token}),(function(){return a.logout()})),a}return Object(o.a)(n,[{key:"login",value:function(e){window.localStorage.setItem("token",e),this.setState({token:e})}},{key:"logout",value:function(){window.localStorage.removeItem("token"),this.setState({token:void 0})}},{key:"render",value:function(){var e=this;return this.state.token?Object(m.jsx)(g,{client:this.client}):Object(m.jsx)(v,{loggedIn:function(t){return e.login(t)},client:this.client})}}]),n}(r.a.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root")),F()}},[[67,1,2]]]);
//# sourceMappingURL=main.6464ff78.chunk.js.map